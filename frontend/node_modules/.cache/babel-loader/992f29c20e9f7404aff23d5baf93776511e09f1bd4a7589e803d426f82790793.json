{"ast":null,"code":"import axios from 'axios';\nimport { useAuthStore } from '../store/authStore';\nconst AUTH_SERVICE_URL = process.env.REACT_APP_AUTH_SERVICE_URL || 'http://localhost:3001';\nconst POSTS_SERVICE_URL = process.env.REACT_APP_POSTS_SERVICE_URL || 'http://localhost:3002';\n\n// Create axios instances\nconst authService = axios.create({\n  baseURL: AUTH_SERVICE_URL\n});\nconst postsService = axios.create({\n  baseURL: POSTS_SERVICE_URL\n});\n\n// Add interceptor to handle 401 errors\nconst handleUnauthorized = error => {\n  if (error.response && error.response.status === 401) {\n    useAuthStore.getState().logout();\n  }\n  return Promise.reject(error);\n};\nauthService.interceptors.response.use(response => response, handleUnauthorized);\npostsService.interceptors.response.use(response => response, handleUnauthorized);\n\n// Auth Service API\nexport const authAPI = {\n  login: async (username, password) => {\n    const response = await authService.post('/api/auth/login', {\n      username,\n      password\n    });\n    return response.data;\n  }\n};\n\n// Posts Service API\nexport const postsAPI = {\n  getPosts: async token => {\n    const response = await postsService.get('/api/posts', {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    return response.data;\n  },\n  createPost: async (token, message) => {\n    const response = await postsService.post('/api/posts', {\n      message\n    }, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    return response.data;\n  }\n};","map":{"version":3,"names":["axios","useAuthStore","AUTH_SERVICE_URL","process","env","REACT_APP_AUTH_SERVICE_URL","POSTS_SERVICE_URL","REACT_APP_POSTS_SERVICE_URL","authService","create","baseURL","postsService","handleUnauthorized","error","response","status","getState","logout","Promise","reject","interceptors","use","authAPI","login","username","password","post","data","postsAPI","getPosts","token","get","headers","Authorization","createPost","message"],"sources":["/Users/marceldiazgranadosrobayo/Desktop/Desarrollo-de-Red-Social-/frontend/src/services/api.ts"],"sourcesContent":["import axios from 'axios';\nimport { useAuthStore } from '../store/authStore';\n\nconst AUTH_SERVICE_URL = process.env.REACT_APP_AUTH_SERVICE_URL || 'http://localhost:3001';\nconst POSTS_SERVICE_URL = process.env.REACT_APP_POSTS_SERVICE_URL || 'http://localhost:3002';\n\n// Create axios instances\nconst authService = axios.create({ baseURL: AUTH_SERVICE_URL });\nconst postsService = axios.create({ baseURL: POSTS_SERVICE_URL });\n\n// Add interceptor to handle 401 errors\nconst handleUnauthorized = (error: any) => {\n  if (error.response && error.response.status === 401) {\n    useAuthStore.getState().logout();\n  }\n  return Promise.reject(error);\n};\n\nauthService.interceptors.response.use((response) => response, handleUnauthorized);\npostsService.interceptors.response.use((response) => response, handleUnauthorized);\n\n// Auth Service API\nexport const authAPI = {\n  login: async (username: string, password: string) => {\n    const response = await authService.post('/api/auth/login', {\n      username,\n      password,\n    });\n    return response.data;\n  },\n};\n\n// Posts Service API\nexport const postsAPI = {\n  getPosts: async (token: string) => {\n    const response = await postsService.get('/api/posts', {\n      headers: {\n        Authorization: `Bearer ${token}`,\n      },\n    });\n    return response.data;\n  },\n\n  createPost: async (token: string, message: string) => {\n    const response = await postsService.post(\n      '/api/posts',\n      { message },\n      {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      }\n    );\n    return response.data;\n  },\n};\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,YAAY,QAAQ,oBAAoB;AAEjD,MAAMC,gBAAgB,GAAGC,OAAO,CAACC,GAAG,CAACC,0BAA0B,IAAI,uBAAuB;AAC1F,MAAMC,iBAAiB,GAAGH,OAAO,CAACC,GAAG,CAACG,2BAA2B,IAAI,uBAAuB;;AAE5F;AACA,MAAMC,WAAW,GAAGR,KAAK,CAACS,MAAM,CAAC;EAAEC,OAAO,EAAER;AAAiB,CAAC,CAAC;AAC/D,MAAMS,YAAY,GAAGX,KAAK,CAACS,MAAM,CAAC;EAAEC,OAAO,EAAEJ;AAAkB,CAAC,CAAC;;AAEjE;AACA,MAAMM,kBAAkB,GAAIC,KAAU,IAAK;EACzC,IAAIA,KAAK,CAACC,QAAQ,IAAID,KAAK,CAACC,QAAQ,CAACC,MAAM,KAAK,GAAG,EAAE;IACnDd,YAAY,CAACe,QAAQ,CAAC,CAAC,CAACC,MAAM,CAAC,CAAC;EAClC;EACA,OAAOC,OAAO,CAACC,MAAM,CAACN,KAAK,CAAC;AAC9B,CAAC;AAEDL,WAAW,CAACY,YAAY,CAACN,QAAQ,CAACO,GAAG,CAAEP,QAAQ,IAAKA,QAAQ,EAAEF,kBAAkB,CAAC;AACjFD,YAAY,CAACS,YAAY,CAACN,QAAQ,CAACO,GAAG,CAAEP,QAAQ,IAAKA,QAAQ,EAAEF,kBAAkB,CAAC;;AAElF;AACA,OAAO,MAAMU,OAAO,GAAG;EACrBC,KAAK,EAAE,MAAAA,CAAOC,QAAgB,EAAEC,QAAgB,KAAK;IACnD,MAAMX,QAAQ,GAAG,MAAMN,WAAW,CAACkB,IAAI,CAAC,iBAAiB,EAAE;MACzDF,QAAQ;MACRC;IACF,CAAC,CAAC;IACF,OAAOX,QAAQ,CAACa,IAAI;EACtB;AACF,CAAC;;AAED;AACA,OAAO,MAAMC,QAAQ,GAAG;EACtBC,QAAQ,EAAE,MAAOC,KAAa,IAAK;IACjC,MAAMhB,QAAQ,GAAG,MAAMH,YAAY,CAACoB,GAAG,CAAC,YAAY,EAAE;MACpDC,OAAO,EAAE;QACPC,aAAa,EAAE,UAAUH,KAAK;MAChC;IACF,CAAC,CAAC;IACF,OAAOhB,QAAQ,CAACa,IAAI;EACtB,CAAC;EAEDO,UAAU,EAAE,MAAAA,CAAOJ,KAAa,EAAEK,OAAe,KAAK;IACpD,MAAMrB,QAAQ,GAAG,MAAMH,YAAY,CAACe,IAAI,CACtC,YAAY,EACZ;MAAES;IAAQ,CAAC,EACX;MACEH,OAAO,EAAE;QACPC,aAAa,EAAE,UAAUH,KAAK;MAChC;IACF,CACF,CAAC;IACD,OAAOhB,QAAQ,CAACa,IAAI;EACtB;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}